CREATE TABLE staff (id number(10) GENERATED BY DEFAULT AS IDENTITY, first_name varchar2(128) NOT NULL, last_name varchar2(128) NOT NULL, start_date date NOT NULL, sales_outlet_id number(10) NOT NULL, position_id number(10) NOT NULL, PRIMARY KEY (id));
CREATE TABLE position (id number(10) GENERATED BY DEFAULT AS IDENTITY, name varchar2(128) NOT NULL UNIQUE, PRIMARY KEY (id));
CREATE TABLE product (id number(10) GENERATED BY DEFAULT AS IDENTITY, description varchar2(2048) NOT NULL, current_wholesale_price number(10, 2) NOT NULL, current_retail_price number(10, 2) NOT NULL, tax_exempt number NOT NULL, promo number NOT NULL, new_product number(10) NOT NULL, unit_of_measure varchar2(8) NOT NULL, product_group_id number(10) NOT NULL, product_category_id number(10) NOT NULL, product_type_id number(10) NOT NULL, PRIMARY KEY (id));
CREATE TABLE product_type (id number(10) GENERATED BY DEFAULT AS IDENTITY, name varchar2(255) NOT NULL UNIQUE, PRIMARY KEY (id));
CREATE TABLE product_category (id number(10) GENERATED BY DEFAULT AS IDENTITY, name varchar2(255) NOT NULL UNIQUE, PRIMARY KEY (id));
CREATE TABLE product_group (id number(10) GENERATED BY DEFAULT AS IDENTITY, name varchar2(255) NOT NULL UNIQUE, PRIMARY KEY (id));
CREATE TABLE customer (id number(10) GENERATED BY DEFAULT AS IDENTITY, full_name varchar2(128) NOT NULL, email varchar2(256) NOT NULL, since date NOT NULL, loyalty_card_number varchar2(16) NOT NULL, birth_date date NOT NULL, gender varchar2(1) NOT NULL, home_sales_outlet_id number(10) NOT NULL, generation_id number(10) NOT NULL, PRIMARY KEY (id));
CREATE TABLE generation (id number(10) GENERATED BY DEFAULT AS IDENTITY, name varchar2(128), PRIMARY KEY (id));
CREATE TABLE sales_outlet (id number(10) GENERATED BY DEFAULT AS IDENTITY, square_feet number(10) NOT NULL, address varchar2(512) NOT NULL, city varchar2(256) NOT NULL, province varchar2(256) NOT NULL, telephone varchar2(128) NOT NULL, postal_code number(10) NOT NULL, longitude float(10) NOT NULL, latitude float(10) NOT NULL, sales_outlet_type_id number(10) NOT NULL, manager_staff_id number(10), PRIMARY KEY (id));
CREATE TABLE sales_outlet_target (id number(10) GENERATED BY DEFAULT AS IDENTITY, target_date date NOT NULL, product_id number(10) NOT NULL, total_goal number(10) NOT NULL, sales_outlet_id number(10) NOT NULL, PRIMARY KEY (id));
CREATE TABLE pastry_inventory (id number(10) GENERATED BY DEFAULT AS IDENTITY, transaction_date date NOT NULL, start_of_day number(10) NOT NULL, quantity_sold number(10) NOT NULL, waste number(10) NOT NULL, waste_percentage number(10) NOT NULL, sales_outlet_id number(10) NOT NULL, product_id number(10) NOT NULL, PRIMARY KEY (id));
CREATE TABLE sales_receipt (id number(10) GENERATED BY DEFAULT AS IDENTITY, transaction_datetime timestamp NOT NULL, in_store number NOT NULL, "order" number(10) NOT NULL, line_item_id number(10) NOT NULL, quantity number(10) NOT NULL, line_item_amount number(10, 2) NOT NULL, unit_price number(10, 2) NOT NULL, promo number NOT NULL, sales_outlet_id number(10) NOT NULL, staff_id number(10) NOT NULL, customer_id number(10), product_id number(10) NOT NULL, PRIMARY KEY (id));
CREATE TABLE sales_outlet_type (id number(10) GENERATED BY DEFAULT AS IDENTITY, name varchar2(128) NOT NULL UNIQUE, PRIMARY KEY (id));

ALTER TABLE product ADD CONSTRAINT fk_product_category_id FOREIGN KEY (product_category_id) REFERENCES product_category (id);
ALTER TABLE product ADD CONSTRAINT fk_product_group_id FOREIGN KEY (product_group_id) REFERENCES product_group (id);
ALTER TABLE product ADD CONSTRAINT fk_product_type_id FOREIGN KEY (product_type_id) REFERENCES product_type (id);
ALTER TABLE customer ADD CONSTRAINT fk_customer_generation_id FOREIGN KEY (generation_id) REFERENCES generation (id);
ALTER TABLE staff ADD CONSTRAINT fk_staff_position_id FOREIGN KEY (position_id) REFERENCES position (id);
ALTER TABLE sales_outlet_target ADD CONSTRAINT fk_sales_target_sales_outlet_id FOREIGN KEY (sales_outlet_id) REFERENCES sales_outlet (id);
ALTER TABLE pastry_inventory ADD CONSTRAINT fk_pastry_inventory_sales_outlet_id FOREIGN KEY (sales_outlet_id) REFERENCES sales_outlet (id);
ALTER TABLE pastry_inventory ADD CONSTRAINT fk_pastry_inventory_product_id FOREIGN KEY (product_id) REFERENCES product (id);
ALTER TABLE sales_receipt ADD CONSTRAINT fk_sales_receipt_sales_outlet_id FOREIGN KEY (sales_outlet_id) REFERENCES sales_outlet (id);
ALTER TABLE sales_receipt ADD CONSTRAINT fk_sales_receipt_staff_id FOREIGN KEY (staff_id) REFERENCES staff (id);
ALTER TABLE sales_receipt ADD CONSTRAINT fk_sales_receipt_customer_id FOREIGN KEY (customer_id) REFERENCES customer (id);
ALTER TABLE sales_outlet ADD CONSTRAINT fk_sales_outlet_type_id FOREIGN KEY (sales_outlet_type_id) REFERENCES sales_outlet_type (id);
ALTER TABLE sales_outlet ADD CONSTRAINT fk_sales_outlet_manager_staff_id FOREIGN KEY (manager_staff_id) REFERENCES staff (id);
ALTER TABLE customer ADD CONSTRAINT fk_customer_home_sales_outlet_id FOREIGN KEY (home_sales_outlet_id) REFERENCES sales_outlet (id);
ALTER TABLE sales_receipt ADD CONSTRAINT fk_sales_receipt_product_id FOREIGN KEY (product_id) REFERENCES product (id);

EXIT;